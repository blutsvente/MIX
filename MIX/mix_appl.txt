Application Note / TOC

- TOC:

Overview:

 XXX from Claus Schneider

Installation
- Tool installation:
    Not needed, run directely from K:\PROJECTS\MIX\PROG (\\Galaxy\Development\).

Getting Started
    Write Hierachy

    Write Connections
    Convert

A simple example: Alarm clock    

Extended Usage
    Generator statements

    Macro statements

    Additional columns
    
    Configuration files

    IO Sheet
    I2C Sheet
    VI2C Sheet

Extended Example

More Extended Usage

    %LOW_BUS%, %HIGH_BUS%, %LOW%, %HIGH%, %OPEN%

    Constants

    Generics
    
Templates

Known Bugs and Limitations

Internals, extensions

Links
CVS Repository: micmnfs:/home/wig/CVSROOT

Bugtracking: bugzilla.micronas.com
    If you find unexpected or buggy behaviour, please issue a ticket.
    Don't forget to add a short description and a test case.
    A good test case not only are the source files, but also
    log files and the exact command line switches and configuration
    files applied.

- Getting started
  -- Write tabluar description, take examples from distribution to get started.
      you will need at least a sheet CONN and a sheet HIER.
  -- Run "mix_0.pl FOO.xls" to get output data.
  See section "example usage" for more details.



   t.d.: pack into installer (zip file).
   tag all relevant files in the CVS repository with an appropriate tag.
   
- Basic wiring:

- Macro definitions and evaluation:
  MH: Macro header: needs to match against the MX line ($X defines variables)
  MD: Body of macro. Will be inserted after variable replacement.
  MX: Triggers macro expansion. Will be matched against all MH lines known.
  Defines variable values.

- Generator statements, extended match operators:

- Command line switches:
(from mix_0.pl):

#
#TODO: Add that to application note
# -out OUTPUTFILE.ext       defines output filename and type
# -outenty OUT-e.vhd        filename for entity. If argument is ENTY, each entity
#                                   will be written into a file calles entityname-e.vhd
# -outarch OUT-rtl-a.vhd
# -outconf OUT-c.vhd
# -combine                      write entity, architecture and configuration into one file for each
#                                   entity
# -top TOPCELL                 use TOPCELL as top. Default is TESTBENCH or daughter of TESTBENCH
# -adump                        dump internal data in ASCII format, too (debugging, use with small data set).
# -variant
# -conf key.key.key=value Overwrite $EH{key}{key}{key} with value
# -listconf                       Print out all available/predefined configurations options
# -delta                           Output will be compared against previous runs
# -sheet SHEET=MATCH     SHEET can be one of "hier", "conn", "vi2c"
#


# Add your options here ....
mix_getopt_header(qw(
    out=s
    outenty=s
    outarch=s
    outconf=s
    top=s
    variant=s
    adump!
    conf=s@
    sheet=s@
    delta!
    listconf
    ));

+

"Standard" options:
    my @stdopts = qw(help|h! verbose|v! quiet|q! nobanner!  debug:i  makeopts=s@ gmakeopts=s@);

- All output will be logged to mix_0.out in cwd.

- Usage of generics and parameters:

- Usage of low and high busses:

- Usage of constants

- Not allowed are:

- Configuration switches:

- Signal names have to be unique (but can be defined with %::column% macros)

- Text proceesing capabilites:
    Use %::column% marker will  be replaced by content of this column will processing.

- Predefined text markers are:
    %HIGH%
    %LOW%
    %HIGH_BUS%
    %LOW_BUS%
    %TOP%
    %OPEN%   pseudo signal, used to allow open output ports. "open" will be mapped to %OPEN%.

- How to leave some pins of module bar port a open?

MIX has no knowledge about ports. Everything is defined in terms of signals and instances.
Use the "open" pseudo signal to define the extra pins.

E.g.: wire foo/a port to bar/a port. bar/a has extra pins.

signal_a,   ::high 7, ::low 0, ::out foo/a ::in bar/a
%OPEN%, ::high 1, ::low 0, ::out -, ::out bar/a(9:8)

You could also force the ::in pins to high or low, instead, e.g. use %HIGH%, %HIGH_BUS%, %LOW
    or %LOW_BUS%. Or a constant.

- Format of intermediate xls sheet will be kept as is.

- Output files will be generated in current directory if not stated otherwise.

- Runtime configuration is influenced by (increasing precedence):
    built-in default values
    mix.cfg files (if found $HOME, $PROJECT and/or in current directory). Format is:
        MIXCFG name.of.conf value
    CONF sheet found in input xls files
    command line switch -conf name.of.conf=value

        Look for mix.cfg in the following locations:
        1. ENV{HOME} aka 'HOMEDRIVE' . 'HOMEPATH' or 'USERPROFILE' or 'C:\'
        2. ENV{PROJECT}
        3. 
        Order: HOME / HOME / cwd() / -conf (last wins)


- If no ::arch column is given, architecture will default to "rtl"
    (configuration hier.field.::arch.[3] = rtl; cannot be changed globally)

- -delta switch: Do not change output files, but report number of deltas.
Will add extra sheets DIFF_CONN and DIFF_HIER (and old versions of them).
Will overwrite FOO.pld internal output.
Will add to mix_0.pl
If a new *.vhd file needs to be created, -delta will not be applied for that file,
but it will be generated as new. If you never have made a FOO-mixed.xls intermediate
output, there will be no HIER or CONN sheet generated.

By adding the following two lines to your configuration (e.g. ./mix.cfg), delta mode will
be the default:

MIXCFG output.generate.delta 1
MIXCFG output.delta sort,remove

See the configuration option description for more details.

-nodelta switches of the delta mode.
- UNIX/MS-Win Issues:

-- Use "recode pc..lat1 *.vhd" for easy and fast DOS2UNIX converter
    (module load freeware)

Example:

See also: command line switches, -listconf

-- Examples usage

