#
# Issue List
#
# $RCSfil$
# $Id: TODO.txt,v 1.12 2003/07/09 07:52:43 wig Exp $
#
Major: IO sheet processing!!

Doku:
    App Note:
        Describe macro usage
        Describe generator usage
        Describe use
        Describe command line switches
        Describe mix.cfg
        Describe CONF sheet

Hint: Use "recode pc..lat1 *.vhd" for easy and fast DOS2UNIX converter

TODOs:


-. 20030702c/Req: compare leaf blocks generated with entity definitions
    Req: mpit
    Prio: medium

- 20030702b/Req: helper tool: read in entity description and create ExCEL sheet skelton
    Columns:
            ::name, ::type, ::mode, ::in, ::out, ::descr
    or:
    -- VHDL/Verilog entities einlesen und in MIX Format konvertieren:
    Signalname, Type, Mode, ::in, ::out, ::descr, ... als Grundlageninfrastruktur zur Verfügung stellen.
	allgemein: -create    create all needed sheets in Excel. If arguments are *.v or *.vhd, convert these
	into suitable excel sheets (either one per entity or a common one).

    Req: mpallas
    Prio: medium


- 20030630c/Bug: Complain if someone uses VHDL keywords as signal names, e.g.
    "signal". The built-in list seems to be ignored.

    Todo: make sure list ist getting evaluated and corrected accordingly.
    Add "check_reservedwords" function to MixChecker.pm and
    insert into add_inst and add_hier ....

    See also _check_keywords function in MixParser.pm!
    
    Req: wig
    Prio: medium
    
- 20030630b/Req: Compare MIX against
    -- Ganove
    -- HDL Designer / Mentor Grafics
    -- Spinner / Duolog (see Claus Schneider, 2003-06-06)

- 20030630a/Bug: IO mode not handeled properly
    See example from VGCA

    Comment: Need improved connection bus handling!! Improved driver/load handling!
    Use vector{i|o} = A:[ciobt] ... c:= inout (common), i := in, o := out, b:= buffer, t := tristate
    
    Req: mpit
    Prio: high

- 20030604b/Req: Allow other keywords to match in generator/macros, not only ::inst
  names.

    Req: wig
    Prio: medium

- 20030604c/Req: Make nameing schema for IOcells and Pads more flexible.
    e.g. use ::name as name root (not ::type ..)

    Req: pallas
    Prio: medium


- 20030516a/Bug: bus-port which has only single bit inputs gets connected incorrect

    Testcase: bug20030516
    Req: wig
    Prio: High

- 20030424a/Bug:

das Signal 'nreset' wird auf den Port 'nreset' korrekt verdrahtet (Erzeugung eines
internen Signals 'int_s_reset', das an den Port und die meisten Module verdrahtet wird).
Allerdings wird auf alle internen Module bei denen der Eingangspin nicht 'nreset' heißt, 
der Port 'nreset' angeschlossen, was zu Compilerfehlern führt.

    Testcase:
    Req: Pallas
    Prio: medium
    Testcase: nreset2.xls

- 20030407a/CR: %OPEN% net to allow wiring of ports (out) not in use.
Invent s.th. simliar for input ports (set to default H or L ???)
Resolve the conflict with wig20030124a

    Req: Pallas
    Prio: medium

- 20030404g/CR: add open signals to %TOP%, e.g. if no ::in or ::out
is defined.

    Req: wig
    Prio: medium

- 20030404f/CR: if %TOP% is used in ::out or ::in, figure out top level
  and wire to that. Another way to specify wiring to top level is to
  use I and O as mode definitions for signals.

    Req: wig
    Prio: medium
    
- 20030404e/CR: add -conf script.post SCRIPT and -conf script.pre SCRIPT
  configuration. pre will be executed before anything else is done.
  post jsut before MIX ends. If pre script returns an exit code different from 0,
  MIX will exit with this error code. post script return code will be taken as MIX
  return code.

    Req: wig
    Prio: low
    Solution: started, but never tested ...

- 20030404d/CR: -inplace option
    Take previous results and keep user changed contents (marked properly)
    if possible.
    aka. read in existing blocks and just rewrite mix generated data.
    Requires: appropriate framing

    Req: wig
    Prio: low
    
- 20030404c/Int: Improve tests
    split all tests in frontend/backend
    Req: wig
    Prio: medium
    
- 20030404b/CR: Improve delta/ExCEL mode:
    add ::header tags to stringify
    split deltas into different columns
    
- 20030404a/CR: add -dan option : delta and new
    rename old files (*.vhd)
    create new files (*.vhd)
    create diff files (*.vhd)
    will update FOO-mixed.xls accordingly
    Req: wig
    Prio: low

- 20030403a/CR: add signal between constant and port map
    Req: pallas
    Prio: medium
    Done: wig20030404
    Testcase: constant (updated output)

- 20030313g/Bug: Improve Load/Driver evaluation
   If port width ne signal width, count "bit"wise. Save instead of integers
   into the AEPORT data structure. Add MIN,MAX,ALL fields.
   (Stick to bits functions like B::00iioo, F::foo:T::bar or A::)

    Req: wig
    Prio: medium

- 20030313b/Bug: Cannot rename new spreadsheet to BLA-mixed.xls, if BLA-mixed
  already open in other directory. Check that and report usefull error message.
    Req: wig
    Prio: low
    

- 20030312a/Check: Find "open" input ports and report
    Req: wig
    Prio: medium

- 20030311d/Check: Complain about unrestricted busses ( ..._vector missing High/Low).
    Req: wig
    Prio: medium


- 20030311b/Bug?: Check mde-b_real / cgs_ramclk / cgs_ramclk_s (i58_core)
    Req: Pallas
    
- 20030311a/Bug: Check mde-b_real / cl24_init_frame
    Req: Pallas

- 20030228d/Feature: generate hierachical sheets
    Req: Claus
    Prio: Low

 


- 20030228a/Feature: Write out evaluated contents of mix.cfg (and timestamp) and
   command line switches and %EH to CONF sheet!
   Reason: can be reevaluated on backend side, catch differences
   
   Req: wig
   Prio: medium
   
- 20030227b: Check if signal ends in an intermediate hierachy
    Requested: wig
    Prio: medium
    


 
- 20030224a: Accept strings in (F:T) of ::in and ::out descriptions
  (string should be generic or constant)

- 20030221d: Accept strings as high/low bus bounds.
  wig
 


- 20030220i: Rewrite writers:
    -- Output into hash %outfiles{FILENAME}
    -- Fix DOS/UNIX CR issue


- 20030220j: Use Bugzilla for issues 



- OPEN wires to external
  wig20030124a

- Check if the a object (Workbook) is opened from different path, but with
  same name?
  wig20030100
  
- Use / as file name seperator, convert to other format ( \ ) on demand (wig20021219)

- Implement extended range definitions for generator like:
    $i (1,7,13..15 )
  requested by sb20030117

- Implement second run parameter $j for generator like:
    $j (1..17), $i (1,3,5,20), /blablubber/
    requested by sb20030117


- ::variants: Default eq. "", if -variant VAR select Default + VAR.
  ::variants := VAR1,VAR2,Default
  ::variants := ""

- iN_foo N := 1.. number of instances of entity foo.

- output separate interconnect sheets for each intermediate hierachy (in addition to flat interconnect sheet) 

- 20030220b: Check: RTL architecture must be unique
  Requested by ST. Bartels
  
- 20030220c: lower case everything!
  -- global configuration variable: lc := force|check|no
  -- implement checker: see if cases sensitvitiy creates conflicts, report!
  -- if force mode -> collaps conflicts
  
  Possibly inform if a name is not unique
  Requested by M. Pallas

- 20030220d: Change EOL for -a, -e, -c files (MS-Win vs. UNIX)
  Workaround: Use script (recode)
  Prio: low
  Requested by M. Pallas

- 20030220e: Documentation + Application Note
  Application note:
        non-leaf cells multiple instantiation, how-to: global signal names localization

DONE: ++++++++++++++++++++++++

- 2003070a/Bug: output.path is not implemented!
    Cannot write datato dir other than cwd()
    
    Req: mpit
    Prio: medium
    Impl: 20030703wig  ( -dir DIRECTORY ) + documentation
    Tested: wig20030705
    Status: Solved

- 20030604a/Bug: Do not generate configuration for Verilog instances in common
   config file
   
    Req: wig
    Prio: low
    Solved: wig
    
- 20030228c/Feature: write arch, conf and entity into one file
  per entitiy (command line switch)
    Req: wig
    Prio: low
    Solution: set -combine option (or set outarch=COMB, outenty=COMB, outconf=COMB)
   
- 20030227b: 
    Write out ENTY-e.vhd.N if a entity gets instantiated several times
    Requested: wig
    Prio: low
    Solved: think so ...

- Accept %::COL% in :name and ::inst columns
  early expansion required!
  wig20030124

- 20030702a/Req: User defined macro input
    -conf macro.%MY_MACRO%=MY_MACRO_VALUE

    Req: wig
    Prio: medium
    Workaround: add
    MIXCFG macro.'%MY_MACRO%' MY_MACRO_VALUE
    to mix.cfg configuration file.
    Solved: wig20030708
    
- Open files, delay close until EOF processing
  Done: wig

- 20030311c/Feature: How to handle I/O ? What to do with signals not connected to
  leaf blocks? Missing drivers? Missing loads?

    wig: I/O ports are now brought up to their TOP cell.
    TOP is defined to be the daughter(s) of testbench (if not specified by the -top
    switch.
    Done: release_20030401

- 20030331a/bug: ::variant and generator
    generated instances are added, even if ::variant does deselect that statement

    Req: wig
    Prio: medium
    Fixed: 20030331
    
- 20030325b/bug: Constant definition

in MIX wird folgendes definiert:
std_ulogic_vector   15   0   C               0x58B0   cgu_logic_i1/signature_val

danach wird folgendes VHDL generiert (cgu-rtl-a.vhd):					
...
signal	mix_const_0	: std_ulogic_vector(15 downto 0); 
...
mix_const_0 <= "22704";
...

besser wäre im VHDL:
constant mix_const_0	: std_ulogic_vector(15 downto 0) := 16#58B0#;

wig: conversion to "101010" required for std_[u]logic_vector

Req: pallas
Prio: medium
Fixed: release_20030401
Testcase: constants.xls


- 20030325a/bug:
    constant signal assignments happens also inside of instance (not just in
    architecture of parent instance)
    Req: wig
    Prio: medium
    Fixed: wig (aeport data structure had entries with only load's and driver's)


- 20030313e/Bug: Allow "constant" assignments on bus splices
    This works today! leave the ::name field empty or give the constant a name
    different from the signal/port you want to assign to.
    Req: wig
    Prio: medium
    Fixed: n/a
    

- 20030313d/Bug: Do bus/bit/port handling in signal assigments, not in port maps!
    Req: pallas
    Prio: High
    Comment: Actually this seems not to be necessary.

    
- 20030313f/Feature: ExCEL chart diff (might be duplicate)
    Create "DELTA" chart, stringfy input and run through "Text::diff"
    Nameing: D_CONN, D_CONF, D_HIER, ...
    
    Req: wig
    Prio: medium
    Done: wig20030324, enabled by -delta switch

- 20030313c/Feature: Detect generated port in a row and combine (might be
    done best on the intermediate data?)
    Req: wig
    Prio. Medium
    Done: wig20030324, handled by bits functions

- bug/20030226b: check nreset signal
    Done: wig20030324
    Testcase: mde_tests.xls

- 20030311e/Bug: Reenable ExCEL warnings after MIX run (otherwise you will never
    see warnings again and might loose work).
    Req: wig
    Prio: medium
    Done: wig20030324

- 20030226d: wiring still does not work as expected:
      port maps and entitiy may have name only once.
      combination has to be done in signal assignment
    Done: 20030324wig
    Testcase: all of mde_tests.xls

- 20030221c: Add command args line to all output files ...
   1. intermediate: ::comment ??
     Done wig20030221
   2. output: add to header.
     Done wig20030221
    
- Fold/Condense multiple entries (e.g. comments, ::in, ::out)
    Done: wig20030324
    
- Concatenate busses (e.g. if bits are defined).
    Done: wig20030324

- Defaults for connections:
    bit -> std_ulogic (done)
    bus/vector -> std_ulogic_vector (if type empty and low and high defined)
    generic -> integer

    req. sb20030117
    Done: 2ig20030324

- 20030220g: Add <CR> into ::in and ::out cells, recognize in inout
   done/wig20030220, rel. 1.7 MixUtils
   Issue: late insertion not really handeled by regular "parse_macro"
    
- 20030220h: Bug section:
    			p_mix_cp_lcmd_6_6_gi	: in	std_ulogic_vector(6); -- __W_SINGLEBITBUS
    should read as:
                    p_mix_cp_lcmd_6_6_gi : in std_ulogic; -- __I_SINGLEBITREDUCED

    Req: mpallas
    Prio: medium (workaround: manual edit)
    Testcase: bitsplice / CONN / TestMDE_1 (wig20030312)
    Done: wig    

- 20030220f: Port<->Signal assignment depends on IN vs. OUT
    Done: wig

    
- 20030317a/Bug: Missing Port in component
    sbist_fail_ fehlt an ifu_top (kommt aus ga, Pin8, 9)
    Req: pallas
    Prio: high
    Done: 20030324wig
    Testcase: mde_tests

- 20030227a: File name generation:
      ENTY-e.vhd
      ENTY-ARCH-a.vhd
      ENTY-ARCH-CONF-c.vhd
          (whole name equals ::conf column, but _ -> -)
      
    Requested: wig
    Prio: medium
    Done: 20030317

- Add generator comment line to all output:
    -- timestamp
    -- hostname
    -- timestamp and location of all input data
    -- arguments


- 20030228b/Feature:
    Delta mode: Generate Delta to previous output (diff)
        - intermediate
        - backend
    Minimum: Indicate if previous output was the same

    Use: Algorithm::Diff, Text::Diff
    Req: wig
    Prio: low
    Done: 20030317, wig

- 20030313a/Bug: MDE-B_TL.xls gets closed after parsing. Should stay open!
    Req: wig
    Prio: low
    Done: wig (reason: case of filename, use lowercase now)

- 20030312b/Feature: Add user specific configuration file (use home directory)
    Req: wig
    Prio: low
    Done: 20030317wig
        Look for mix.cfg in the following locations:
        ENV{HOME} aka 'HOMEDRIVE' . 'HOMEPATH' or 'USERPROFILE' or 'C:\'
        ENV{PROJECT}
        Order: HOME / HOME / cwd() / -conf (last wins)

- 20030221a:
    Read configuration options from "CONF" sheet
    | MIXCFG | key | value |
    keys are
       generate.output.arch leaf|noleaf
       generate.output.conf leaf|noleaf
       generate.output.enty leaf|noleaf
       .... (only existing keys in EH may be overridden) ....
   Read file in current dir "mix.cfg"
   See also: 20030312b
   
  option: -conf KEY=VAL
  option: -listconf  -> print out list of configuration keys

  Order: builtin < mix.cfg < CONF < command line

Done wig20030221

- 20030220k: Format ExCEL intermediate (column layout, page breaks ...), color, ....
  Priority: low (see 20030226c)
  Comment: ExCEL intermediate keeps format from previous runs, now.

- 20030221b: add option: -sheet CONN="CONN_PERLRE", -sheet HIER="HIER_PERLRE" ...

  Done wig20030221


- 20030220a: Add ::architecture column, which defines the architecture name
  Default: RTL
  Requested by St. Bartels
  Done: wig
  Testcase: any


- 20030226a: Do not add configuration for verilog instances
  by: Michael Pallas
  done: wig 20030227
  testcase: sigport.xls/HIER_VERI


- 20030226e: add column for library use:
    e.g.: ::use
    will be added to entity definition and possibly to arch and conf
    syntax:
        ALL:NAME.component,ENTY:NAMEB.component,ARCH:NAMEC,
        CONF:NAMED,NAMEE

    the ALL|ENTY|ARCH|CONF keyword selects into which files the use
    statement gets generated. Default is "ENTY".
    Capitalization does not matter.
    ->

    library NAME;
    use NAME.component.ALL;

    req: Michael Pallas   
    done: wig20030227
    test case: sigport.xls/HIER_USE
    

- 20030226c: Keep ExCEL output format in -mixed.xls if possible.
  wig
  done 20030226
  

    - Make sure "0" is not going to become "<spc>" (wig20021219)
    fixed in MixUtils, 20030110

     - Keep already open files open after end
     impl. 20030113

    - Add signal width for busses before outputing ... (if width is defined for bus and in/out has >none<)
    fixed in MixParser, wig20030113 